<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ticket 58mm</title>
<style>
  body { margin: 0; background: #fff; }
  .ticket { width: 58mm; margin: 10px auto; font-family: monospace; font-size: 11px; line-height: 1.3; }
  .toolbar { position: sticky; bottom: 0; display: flex; gap: 12px; padding: 10px; background: #fff; border-top: 1px solid #ddd; }
  @media print {
    @page { size: 58mm auto; margin: 5mm; }
    body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    .toolbar { display: none; }
  }
</style>
</head>
<body>

<div id="ticket" class="ticket">
  <!-- ===== TU RECIBO AQUÍ ===== -->
  <div style="text-align:center;">
    <b>MD MAGUEY DISTRIBUTOR</b><br/>
    250 ROBINSON AVE #2 - BRONX NY 10465<br/>
    Tel: 347-589-2676
  </div>
  <hr/>
  Fecha: Aug 30, 2025 11:43 PM<br/>
  Factura No.: 7ae0e53a<br/>
  Cliente: Juan<br/>
  <hr/>
  <b>QTY  DESCRIPCIÓN           TOTAL</b><br/>
  1     Tamarindo 8 oz          $2.50<br/>
  <hr/>
  Total Unidades: 1<br/>
  <b>TOTAL A PAGAR:             $2.50</b><br/>
  <div style="text-align:center; margin-top:6px;">¡Gracias por su compra!</div>
</div>

<div class="toolbar">
  <button id="btnPDF">Descargar PDF</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
document.getElementById('btnPDF').addEventListener('click', async () => {
  const { jsPDF } = window.jspdf;
  const el = document.getElementById('ticket');
  const canvas = await html2canvas(el, { scale: 2, useCORS: true, backgroundColor: '#ffffff' });
  const imgData = canvas.toDataURL('image/png');

  const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: [58, 1000] });
  const imgW = 58;
  const imgH = (canvas.height * imgW) / canvas.width;

  pdf.addImage(imgData, 'PNG', 0, 0, imgW, imgH);
  pdf.internal.pageSize.height = imgH;
  pdf.save(`factura_${Date.now()}.pdf`);
});
</script>
</body>
</html>
